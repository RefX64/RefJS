'use strict';var _typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&'function'==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?'symbol':typeof b},_createClass=function(){function b(d,e){for(var g,f=0;f<e.length;f++)g=e[f],g.enumerable=g.enumerable||!1,g.configurable=!0,'value'in g&&(g.writable=!0),Object.defineProperty(d,g.key,g)}return function(d,e,f){return e&&b(d.prototype,e),f&&b(d,f),d}}();Object.defineProperty(exports,'__esModule',{value:!0});function _classCallCheck(b,d){if(!(b instanceof d))throw new TypeError('Cannot call a class as a function')}var RefJS=exports.RefJS=function(){function b(){_classCallCheck(this,b),this.GlobalOptions={FetchCache:'default'},this.ToParamString=this.generateStringParam,this.IsFunction=this.isFunction,this.GenerateUnobtrusiveFunction=this.generateUnobtrusiveFunction}return _createClass(b,[{key:'find',value:function find(d){var e='#'===d[0],f='.'===d[0],g=d.includes(' ')||d.includes('=')||d.includes('[')||e&&d.includes('.');return g?document.querySelectorAll(d):e?document.getElementById(d.substring(1)):f?document.getElementsByClassName(d.substring(1)):!(e||f||g)?document.getElementsByTagName(d):document.querySelectorAll(d)}},{key:'Id',value:function Id(d){return document.getElementById(d)}},{key:'OnDocumentReady',value:function OnDocumentReady(d){'complete'===document.readyState?d():document.addEventListener('DOMContentLoaded',d)}},{key:'AddEventListener',value:function AddEventListener(d,e,f){var g=this.getObjectOrExecuteQuery(e);this.executeCollectionOrSingleTask(g,function(h){h.addEventListener(d,f)})}},{key:'RemoveEventListener',value:function RemoveEventListener(d,e,f){var g=this.getObjectOrExecuteQuery(d);this.executeCollectionOrSingleTask(g,function(h){h.removeEventListener(e,f)})}},{key:'AsyncLoad',value:function AsyncLoad(d,e,f,g){var h=this;return this.finalRequest(!1,e,f,this.fillMissingAsyncOptions(g,!1)).then(function(j){var k=h.IsObject(d)?d:h.getObjBySanitizedID(d);h.Empty(k),k.innerHTML=j;var l=k.querySelectorAll('script');h.ForEach(l,function(m){h.NodeScriptReload(m)})}).catch(function(j){console.error(j)})}},{key:'AsyncGet',value:function AsyncGet(d,e,f){return this.finalRequest(!1,d,e,this.fillMissingAsyncOptions(f,!1))}},{key:'AsyncGetJson',value:function AsyncGetJson(d,e,f){return this.finalRequest(!1,d,e,this.fillMissingAsyncOptions(f,!0))}},{key:'AsyncPost',value:function AsyncPost(d,e,f){return this.finalRequest(!0,d,e,this.fillMissingAsyncOptions(f,!1))}},{key:'AsyncSubmitForm',value:function AsyncSubmitForm(d,e){var f=this.getObjBySanitizedID(d),g=f.getAttribute('action'),h=new FormData(f);return this.finalRequest(!0,g,h,this.fillMissingAsyncOptions(e,!1))}},{key:'finalRequest',value:function finalRequest(d,e,f,g){var h=this;return new Promise(function(j,k){e=d?e:h.formatURLWithParam(e,f),d&&!h.IsFormData(f)&&(f=h.generateFormDataFromObj(f));var l={method:d?'POST':'GET',body:d?f:null,cache:g.fetchCache,mode:g.fetchMode,credentials:'same-origin'};fetch(e,l).then(h.checkFetchStatus).then(function(m){return g.isJson?m.json():m.text()}).then(function(m){j(m)}).catch(function(m){console.error(m),k(m)})})}},{key:'checkFetchStatus',value:function checkFetchStatus(d){if(200<=d.status&&300>d.status)return d;var e=new Error(d.statusText);throw e.response=d,e}},{key:'fillMissingAsyncOptions',value:function fillMissingAsyncOptions(d,e){return null!=d&&this.IsObject(d)||(d={}),this.IsValidValue(d.isJson)||(d.isJson=!0===e),this.IsValidValue(d.fetchCache)||(d.fetchCache=this.GlobalOptions.FetchCache),this.IsValidValue(d.fetchMode)||(d.fetchMode='no-cors'),d}},{key:'generateStringParam',value:function generateStringParam(d){var e='';for(var f in d)d.hasOwnProperty(f)&&(0<e.length&&(e+='&'),e+=encodeURI(f+'='+d[f]));return e}},{key:'formatURLWithParam',value:function formatURLWithParam(d,e){return null==e?encodeURI(d):'string'==typeof e?encodeURI(d+'?'+e):encodeURI(d+'?'+this.generateStringParam(e))}},{key:'generateFormDataFromObj',value:function generateFormDataFromObj(d){var e=new FormData;for(var f in d)d.hasOwnProperty(f)&&e.append(f,d[f]);return e}},{key:'executeCollectionOrSingleTask',value:function executeCollectionOrSingleTask(d,e){this.IsArray(d)||this.IsHTMLCollection(d)||d.constructor===NodeList?this.ForEach(d,e):e(d)}},{key:'getObjectOrExecuteQuery',value:function getObjectOrExecuteQuery(d){return this.IsObject(d)?d:this.find(d)}},{key:'getObjBySanitizedID',value:function getObjBySanitizedID(d){return d=d.replace('#',''),this.Id(d)}},{key:'isFunction',value:function isFunction(d){return d&&'[object Function]'==={}.toString.call(d)}},{key:'GetType',value:function GetType(d){return null==d?null:this.IsObject(d)?Object.prototype.toString.call(d):'undefined'==typeof d?'undefined':_typeof(d)}},{key:'IsObject',value:function IsObject(d){return'object'==('undefined'==typeof d?'undefined':_typeof(d))}},{key:'IsFormData',value:function IsFormData(d){return'undefined'!=typeof FormData&&d instanceof FormData}},{key:'IsTypeOf',value:function IsTypeOf(d,e){var f=this.GetType(d);return null!=f&&this.StringContains(f,e)}},{key:'IsNullOrUndefined',value:function IsNullOrUndefined(d){return null==d||'undefined'==d}},{key:'IsNumeric',value:function IsNumeric(d){var e=+d,f='undefined'==typeof d?'undefined':_typeof(d);return null!=d&&'boolean'!==f&&('string'!==f||d.length)&&!isNaN(e)&&isFinite(e)||!1}},{key:'ForEach',value:function ForEach(d,e){if(null!==d&&'undefined'!=typeof d){'object'===('undefined'==typeof d?'undefined':_typeof(d))||this.IsArray(d)||(d=[d]);for(var f=0,g=d.length;f<g;f++)e(d[f])}}},{key:'Empty',value:function Empty(d){var e=this.IsObject(d)?d:this.find(d);this.executeCollectionOrSingleTask(e,function(f){for(;f.firstChild;)f.removeChild(f.firstChild)})}},{key:'ScrollTo',value:function ScrollTo(d,e){var n=this,f=document.scrollingElement||document.documentElement,g=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;this.IsValidValue(e)||(e=1250);var h='number'==typeof d?d:d.getBoundingClientRect().top,j=g,l=20,m=function(o){o+=l;var p=n.easeInOut(o,j,h-j,e);f.scrollTop=p,o<e&&setTimeout(function(){m(o)},l)};m(0)}},{key:'GetScrollTop',value:function GetScrollTop(){if('undefined'!=typeof pageYOffset)return pageYOffset;var d=document.body,e=document.documentElement;return e=e.clientHeight?e:d,e.scrollTop}},{key:'AppendHTML',value:function AppendHTML(d,e,f){this.IsValidValue(f)||(f='beforeend');var g=this.getObjectOrExecuteQuery(d);this.executeCollectionOrSingleTask(g,function(h){h.insertAdjacentHTML(f,e)})}},{key:'MoveHTMLTo',value:function MoveHTMLTo(d,e){var j=this,f=this.getObjBySanitizedID(d),g=this.find(e);this.IsHTMLCollection(f)&&console.error('Error: Source must be a single selectable object.');var h=f.innerHTML;this.Empty(f),this.executeCollectionOrSingleTask(g,function(k){j.Empty(k),k.innerHTML=h})}},{key:'FindChildren',value:function FindChildren(d,e){return d=this.getObjectOrExecuteQuery(d),d.querySelectorAll(e)}},{key:'FindParent',value:function FindParent(d,e){for(var f='#'===e[0],g='.'===e[0];d&&d.parentNode;){if(d=d.parentNode,f&&d.id&&d.id==e.substring(1))return d;if(g&&d.classList&&d.classList.contains(e.substring(1)))return d;if(!f&&!g&&d.tagName&&d.tagName.toLowerCase()==e)return d}}},{key:'Show',value:function Show(d,e,f){var h=this,g=this.getObjectOrExecuteQuery(d);this.executeCollectionOrSingleTask(g,function(j){e?(j.classList.remove('hidden'),!0===f?h.AnimateFadeIn(g):j.style.display='block'):!0===f?h.AnimateFadeOut(g):j.style.display='none'})}},{key:'ToggleShowHide',value:function ToggleShowHide(d,e){var f=this.getObjectOrExecuteQuery(d),g='none'===f.style.display||f.classList.contains('hidden');this.Show(f,g,e)}},{key:'Throttle',value:function Throttle(d,e,f){var g,h,j,k=null,l=0;f||(f={});var m=function(){l=!1===f.leading?0:new Date().getTime(),k=null,j=d.apply(g,h),k||(g=h=null)};return function(){var n=new Date().getTime();l||!1!==f.leading||(l=n);var o=e-(n-l);return g=this,h=arguments,0>=o||o>e?(k&&(clearTimeout(k),k=null),l=n,j=d.apply(g,h),!k&&(g=h=null)):!k&&!1!==f.trailing&&(k=setTimeout(m,o)),j}}},{key:'StringEquals',value:function StringEquals(d,e){return(d+'').toLowerCase()===(e+'').toLowerCase()}},{key:'StringContains',value:function StringContains(d,e){return d.toLowerCase().includes(e.toLowerCase())}},{key:'StringFormat',value:function StringFormat(d){for(var f,e=1;e<arguments.length;e++)f=new RegExp('\\{'+(e-1)+'\\}','gm'),d=d.replace(f,arguments[e]);return d}},{key:'ReplaceAll',value:function ReplaceAll(d,e,f){return this.replace(new RegExp(d.replace(/([\,\!\\\^\$\{\}\[\]\(\)\.\*\+\?\|\<\>\-\&])/g,function(g){return'\\'+g}),'g'+(f?'i':'')),e)}},{key:'CommaFormat',value:function CommaFormat(d){return(+d).toLocaleString('en')}},{key:'IsHTMLCollection',value:function IsHTMLCollection(d){return d.constructor===HTMLCollection}},{key:'IsArray',value:function IsArray(d){return d.constructor===Array}},{key:'ArrayContains',value:function ArrayContains(d,e){for(var f=d.length;f--;)if(d[f]===e)return!0;return!1}},{key:'IsValidValue',value:function IsValidValue(d){return null!=d&&0<d.length&&'undefined'!==d||!0===d||!1===d}},{key:'IsValidElement',value:function IsValidElement(d){this.IsObject(d)?d:this.getObjBySanitizedID(d);return null!==id&&void 0!==id&&0<id.length}},{key:'UrlAction',value:function UrlAction(d,e,f){var g='';if(f){for(var h in f)''!=g&&(g+='&'),g+=h+'='+encodeURIComponent(f[h]);return'/'+e+'/'+d+'?'+g}return null==e||'undefined'==e?'/'+d:'/'+e+'/'+d}},{key:'InputFilterDecimal',value:function InputFilterDecimal(d){d.value=d.value.replace(/[^0-9.]/g,'')}},{key:'RadioButtonValueByName',value:function RadioButtonValueByName(d){return document.querySelector(this.StringFormat('input[name="{0}"]:checked',d)).value}},{key:'AddSelectListItem',value:function AddSelectListItem(d,e,f){this.AppendHTML(d,this.StringFormat('<option value="{1}">{0}</option>',e,f),'beforeend')}},{key:'GetSelectListValue',value:function GetSelectListValue(d){var e=this.getObjectOrExecuteQuery(d);return e[e.selectedIndex].value}},{key:'GetSelectListText',value:function GetSelectListText(d){var e=this.getObjectOrExecuteQuery(d);return e[e.selectedIndex].innerHTML}},{key:'DeleteSelctListItem',value:function DeleteSelctListItem(d,e){for(var f=this.getObjectOrExecuteQuery(d,e),g=0;g<f.length;g++)f.options[g].value===e&&f.remove(g)}},{key:'ClearSelectList',value:function ClearSelectList(d){for(var e=this.getObjectOrExecuteQuery(d);0<e.options.length;)e.remove(0)}},{key:'PopulateSelectList',value:function PopulateSelectList(d,e,f){var h=this,g=this.getObjectOrExecuteQuery(d);!0===f&&this.ClearSelectList(g),this.ForEach(e,function(j){h.AddSelectListItem(g,j.Text,j.Value)})}},{key:'SelectListContains',value:function SelectListContains(d,e,f){var g=this.getObjectOrExecuteQuery(d),h=!1;return this.ForEach(g.options,function(j){h||(j.value===e.toString()&&(h=!0),j.innerHTML===f&&(h=!0))}),h}},{key:'NodeScriptReload',value:function NodeScriptReload(d){if(!0===function(j){return'SCRIPT'===j.tagName}(d))d.parentNode.replaceChild(function(j){var k=document.createElement('script');k.text=j.innerHTML;for(var l=j.attributes.length-1;0<=l;l--)k.setAttribute(j.attributes[l].name,j.attributes[l].value);return k}(d),d);else for(var g=0,h=d.childNodes;g<h.length;)this.NodeScriptReload(h[g++]);return d}},{key:'LoadJS',value:function LoadJS(d,e){var g=this,f=document.createElement('script');f.src=d,f.onload=function(){g.isFunction(e)&&e()},document.head.appendChild(f)}},{key:'IsIEorEdge',value:function IsIEorEdge(){return-1!==navigator.userAgent.indexOf('MSIE ')||-1!==navigator.userAgent.indexOf('Trident/')||-1!==navigator.userAgent.indexOf('Edge/')}},{key:'AnimateFadeOut',value:function AnimateFadeOut(d,e){d=this.getObjectOrExecuteQuery(d),this.executeCollectionOrSingleTask(d,function(){var f=1;null==e&&(e=20);var g=setInterval(function(){0.1>=f&&(clearInterval(g),d.style.display='none'),d.style.opacity=f,d.style.filter='alpha(opacity='+100*f+')',f-=0.1*f},e)})}},{key:'AnimateFadeIn',value:function AnimateFadeIn(d,e){d=this.getObjectOrExecuteQuery(d),this.executeCollectionOrSingleTask(d,function(){var f=0.1;d.style.display='block',null==e&&(e=20);var g=setInterval(function(){1<=f&&clearInterval(g),d.style.opacity=f,d.style.filter='alpha(opacity='+100*f+')',f+=0.1*f},e)})}},{key:'easeInOut',value:function easeInOut(d,e,f,g){return(d/=g/2,1>d)?f/2*d*d+e:(d-=1,-f/2*(d*(d-2)-1)+e)}},{key:'ValidateForm',value:function ValidateForm(d,e){function f(l,m,n){h.push(l),n&&m.classList.add('input-has-error')}d=d.replace('#',''),(null==e||'undefined'===e)&&(e=!0);var g=document.querySelectorAll('#'+d+' [data-val="true"]');if(1>g.length)return!0;var h=[],j=document.querySelector('#'+d+' [data-valmsg-summary=true]');if(this.ForEach(g,function(l){l.classList.contains('input-has-error')&&l.classList.remove('input-has-error');var m=l.hasAttribute('data-val-required'),n=0<l.value.length;if(m&&(null==l.value||1>l.value.length||'select'===l.value.toLowerCase())&&f(l.getAttribute('data-val-required'),l,e),l.hasAttribute('data-val-email')&&(m||n)&&!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,6})+$/.test(l.value)&&f(l.getAttribute('data-val-email'),l,e),l.hasAttribute('data-val-length-min')){var o=parseInt(l.getAttribute('data-val-length-min'));(m||n)&&l.value.length<o&&f(l.getAttribute('data-val-length'),l,e)}if(l.hasAttribute('data-val-length-max')){var p=parseInt(l.getAttribute('data-val-length-max'));(m||n)&&l.value.length>p&&f(l.getAttribute('data-val-length'),l,e)}if(l.hasAttribute('data-val-minlength-min')){var q=parseInt(l.getAttribute('data-val-minlength-min'));(m||n)&&l.value.length<q&&f(l.getAttribute('data-val-minlength'),l,e)}if(l.hasAttribute('data-val-maxlength-max')){var r=parseInt(l.getAttribute('data-val-maxlength-max'));(m||n)&&l.value.length>r&&f(l.getAttribute('data-val-maxlength'),l,e)}'date'===l.getAttribute('type')&&(m||n)&&/Invalid|NaN/.test(new Date(l.value).toString())&&f(l.getAttribute('name')+' must be a proper date value.',l,e),'url'===l.getAttribute('type')&&(m||n)&&/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(l.value)&&f(l.getAttribute('name')+' must be a proper url value.',l,e)}),null==j)return console.info('Not displaying validation errors. [data-valmsg-summary] not found. Use @Html.ValidationSummary() on MVC.'),1>h.length;var k=j.firstChild;return j.className='',this.Empty(k),0<h.length?(j.classList.add('validation-summary-errors'),this.ForEach(h,function(l){k.innerHTML+='<li>'+l+'</li>'}),!1):(j.classList.add('validation-summary-valid'),!0)}},{key:'UnobtrusiveLoadPartial',value:function UnobtrusiveLoadPartial(d){var g=this,e=d.getAttribute('data-url'),f=d.getAttribute('data-targetid');return d.hasAttribute('data-params')&&(e=e+'?'+d.getAttribute('data-params')),this.AsyncLoad(f,e,null,null).then(function(){var h=g.generateUnobtrusiveFunction(d.getAttribute('data-success'));g.isFunction(h)&&h()}).catch(function(h){console.error(h);var j=g.generateUnobtrusiveFunction(d.getAttribute('data-error'));g.isFunction(j)&&j()})}},{key:'generateUnobtrusiveFunction',value:function generateUnobtrusiveFunction(d){if(!this.IsValidValue(d))return null;if(this.StringContains(d,'.')){var e=d.split('.'),f=window[e[0]];return f[e[1]]}return window[d]}}]),b}();